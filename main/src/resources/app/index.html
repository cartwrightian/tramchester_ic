<!DOCTYPE html>
<html lang="en">
<head>
    <title>Tramchester</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>
<body>
<h1 class="tramchesterHeading w-75">Tramchester</h1>
<div id="journeyplan">
    <v-app>
        <v-main>
    <form @submit="plan" class="w-75 tramchesterApp">
        <div class="container" id="startAndEnd">
            <div class="row">
                <div  class="col pl-0">
                    <div id="selectStart">
                        <location-selection :disabled='!ready' :name="'start'" v-model="startStop" :other="endStop" :modes="selectedModes"
                            :geo="havePos" :stops="stops">
                        </location-selection>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col pl-0">
                    <div id="selectEnd">
                        <location-selection :disabled='!ready' :name="'destination'" v-model="endStop"  :other="startStop" :modes="selectedModes"
                        :geo="havePos" :stops="stops" >
                    </location-selection>
                    </div>
                </div>
                <div class="col col-md-auto">
                    <button type="button"  class="btn btn-dark" @click="swap">&#8645;</button>
                </div>
            </div>
            <div class="row">
                <div class="col pl-0 col-md-auto">
                    <label for="arriveBy">arrive by</label>
                    <input type="checkbox" id="arriveBy" v-model="arriveBy">
                </div>
                <div class="col col-md-auto">     
                    <input type="time" id="time" v-model="time"/>
                </div>
                <div class="col">
                    <button id="nowButton" class="btn btn-info" type="button" @click="timeToNow()">Now</button>
                </div>
            </div>
            <div class="row">
                <div class="col pl-0 col-md-auto">
                    <input type="date" id="date" v-model="date"/>
                </div>
                <div class="col pl-0">
                    <button id="todayButton" class="btn btn-info" type="button" @click="dateToNow()">Today</button>
                    <input type="hidden" id="hiddendate" v-model="date"></input>
                </div>
            </div>
            <div class="row" v-if="selectModesEnabled">
                <div class="col pl-0">
                    <multiselect v-model="selectedModes" :options="modes" :multiple="true" :close-on-select="false" :clear-on-select="false" 
                        :searchable="false"  placeholder="Transport modes" :show-labels="false"  :preselect-first="true" size="sm">
                    </multiselect>
                </div>
                <div class="col">
                    <label for="maxChanges">max changes:</label>
                    <input type="number" name="max changes" min="1" max="8" id="maxChanges" v-model="maxChanges"> 
                </div>
            </div>
            <div class="row">
                <div class="col pl-0 col-md-auto">
                    <v-btn :disabled='!ready' id="plan" type="submit" density="compact">
                        Plan
                        <spinner v-if="searchInProgress" id="spinner" small type="grow"></spinner>
                    </v-btn>
                </div>
                <div class="col col-md-auto">
                    <button :disabled='!havePos' id="liveTrams" class="btn btn-info" v-if="havePos" type="button" @click="queryNearbyTrams">
                        Nearby
                        <spinner v-if="liveInProgress" id="nearbySpinner" small type="grow"></spinner>
                    </button>
                </div>
            </div>
        </div>
    </form>
    
    <div id="networkError" selectable v-if="networkError" class="w-75 tramchesterApp">
        <div class="card bg-danger">
            <div class="card-header">Network Error</div>
            <div class="card-body">
                <p class="card-text">Unable to commmunicate with server, please check your network connection</p>
            </div>
        </div>
    </div>

    <div id="outputs" class="mt-3 ml-1 mr-1">
        <notes :journeys="journeys" :livedataresponse="liveDepartureResponse"></notes>
        <live-departures :livedataresponse="liveDepartureResponse"></live-departures>
        <journeys :journeysresponse="journeys" :numjourneystodisplay="numberJourneysToDisplay" v-on:earlier-tram="changeTime" v-on:later-tram="changeTime">
        </journeys>
        <closures></closures>
    </div>

    </v-main>

    <v-dialog v-model="disclaimerDialog" width="auto">
        <v-card>
          <v-card-item>
              <v-card-title>Disclaimer</v-card-title>
          </v-card-item>
          <v-card-text class="model-body">
                <p>Whilst every effort has been made to ensure that the contents of this website are correct,
                    the maintainer does not guarantee and makes no warranty, express or implied, as to
                    the quality, accuracy, completeness, timeliness, appropriateness, or suitability of the
                    information we provide on this website.</p>

                <p>The maintainer also takes no responsibility for the accuracy of information contained on
                    external sources linked to this site.</p>

                <p>The maintainer assumes no obligation to update the information and the information may
                    be changed from time to time without notice.</p>

                <p>To the extent permitted by law the maintainer expressly disclaims all liability for any direct,
                    indirect or consequential loss or damage occasioned from the use or inability to use this
                    websites, whether directly or indirectly resulting from inaccuracies, defects, viruses, errors -
                    whether typographical or otherwise, omissions, out of date information or otherwise.</p>

                <p>Accessing and using the website and the downloading of material from the site (if
                    applicable) is done entirely at the user's own risk. The user will be entirely responsible for
                    any resulting damage to software or computer systems and/or any resulting loss of data.</p>
          </v-card-text>
          <v-card-actions>
            <v-btn @click="dismissDisclaimer()">Ok</v-btn>
          </v-card-actions>
        </v-card>
      </v-dialog>

    <v-dialog v-model="cookieDialog" width="auto">
      <v-card>
        <v-card-item>
            <v-card-title>Cookies</v-card-title>
            <v-card-subtitle>
                Welcome to Tramchester, a quick and easy way to plan your travel in Manchester by Metrolink tram.
            </v-card-subtitle>
        </v-card-item>
        <v-card-text>
            Tramchester uses <b>cookies</b> to store information in your browser about previous usages and recent journeys.
        </v-card-text>
        <v-card-actions>
          <v-btn @click="setCookie()">I agree</v-btn>
        </v-card-actions>
      </v-card>
    </v-dialog>


        <app-footer v-bind:feedinfo="feedinfo" v-on:disclaimer-clicked="showDisclaimer" v-bind:havepos="havePos" 
            v-on:network-error="networkErrorOccured()"></app-footer>

</v-app>

</div> <!-- end of app -->

<script src="/app/main.js"></script>

</body>

</html>
